# makefile for sitsang project

ROOT_DIR = $(shell pwd)
SRC_DIR = $(ROOT_DIR)/src
INC_DIR = $(ROOT_DIR)/include
CONFIG_DIR = $(ROOT_DIR)/config
SCRIPTS_DIR = $(ROOT_DIR)/scripts

HPATH           = $(TOPDIR)/include

all: config
	$(MAKE) -C $(SRC_DIR) all 

dep:
	$(MAKE) -C $(SRC_DIR) dep

.PHONY: config
config: 
	@echo "Create dir.config file for directory information "
	@echo "#This dir.config file is automaticly generated by make config!" > $(SRC_DIR)/dir.config
	@echo "ROOT_DIR="$(ROOT_DIR) >> $(SRC_DIR)/dir.config
	@echo "CONFIG_DIR="$(CONFIG_DIR) >> $(SRC_DIR)/dir.config
	@echo "SRC_DIR="$(SRC_DIR) >> $(SRC_DIR)/dir.config
	@echo "INC_DIR="$(INC_DIR) >> $(SRC_DIR)/dir.config
	@echo "SCRIPTS_DIR="$(SCRIPTS_DIR) >> $(SRC_DIR)/dir.config
	@echo "HPATH="$(HPATH) >> $(SRC_DIR)/dir.config

.PHONY: test
test:
	$(MAKE) -C $(SRC_DIR) test

# This one removes all executables from the tree and forces their relinking
clean:
	$(MAKE) -C $(SRC_DIR) clean


